<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="sysMapper">

	<!--部署表-->
	<insert id="saveSysConfDeploy" parameterType="hashmap">
		INSERT INTO sys_conf_deploy(
			DEPLOY_NAME,DEPLOY_MODE,SOURCE_ROOT,URL_ROOT,
			SFTP_HOST,SFTP_USER,SFTP_PWD,SFTP_PORT,SFTP_ROOT,
			SITE_PK,TARGET_ROOT
		)VALUES(
			#{DEPLOY_NAME},#{DEPLOY_MODE},#{DISK_ROOT},#{URL_ROOT},
			#{SFTP_HOST},#{SFTP_USER},#{SFTP_PWD},#{SFTP_PORT},#{SFTP_ROOT},
			#{SITE_PK},#{TARGET_ROOT}
		)
    </insert>

	<delete id="deleteSysConfDeploy" parameterType="hashmap">
		delete from sys_conf_deploy where SITE_PK = #{SITE_PK}
    </delete>

	<update id="updateSysConfDeploy" parameterType="hashmap">
		update sys_conf_deploy
		<trim prefix="SET" suffixOverrides=",">
			<if test="DEPLOY_NAME != null">DEPLOY_NAME=#{DEPLOY_NAME},</if>
			<if test="DEPLOY_MODE != null">DEPLOY_MODE=#{DEPLOY_MODE},</if>
			<if test="SOURCE_ROOT != null">SOURCE_ROOT=#{SOURCE_ROOT},</if>
			<if test="URL_ROOT != null">URL_ROOT=#{URL_ROOT},</if>
			<if test="SFTP_HOST != null">SFTP_HOST=#{SFTP_HOST},</if>
			<if test="SFTP_USER != null">SFTP_USER=#{SFTP_USER},</if>
			<if test="SFTP_PWD != null">SFTP_PWD=#{SFTP_PWD},</if>
			<if test="SFTP_PORT != null">SFTP_PORT=#{SFTP_PORT},</if>
			<if test="SFTP_ROOT != null">SFTP_ROOT=#{SFTP_ROOT},</if>
			<if test="TARGET_ROOT != null">TARGET_ROOT=#{TARGET_ROOT},</if>
		</trim>
		WHERE SITE_PK = #{SITE_PK}
	</update>

	<select id="querySysConfDeploy" resultType="hashmap" parameterType="hashmap">
		select DEPLOY_NAME,DEPLOY_MODE,SOURCE_ROOT,URL_ROOT,
			SFTP_HOST,SFTP_USER,SFTP_PWD,SFTP_PORT,SFTP_ROOT,
			SITE_PK,TARGET_ROOT
		from sys_conf_deploy
		where 1=1
		<if test="SITE_PK != null">
			AND SITE_PK = #{SITE_PK}
		</if>
		<if test="DEPLOY_NAME != null">
			AND (DEPLOY_NAME like '%${DEPLOY_NAME}%')
		</if>
		<if test="SFTP_HOST != null">
			AND SFTP_HOST = #{SFTP_HOST}
		</if>
	</select>



</mapper>

